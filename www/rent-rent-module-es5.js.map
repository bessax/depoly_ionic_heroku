{"version":3,"sources":["webpack:///src/app/rent/rent.page.html","webpack:///src/app/rent/rent-routing.module.ts","webpack:///src/app/rent/rent.module.ts","webpack:///src/app/rent/rent.page.scss","webpack:///src/app/rent/rent.page.ts","webpack:///src/app/services/rent.service.ts"],"names":["routes","path","component","RentPageRoutingModule","imports","forChild","exports","RentPageModule","declarations","entryComponents","RentPage","formBuilder","atrCtrl","loadingController","router","camera","httpClient","popover","modalCtrl","crop","actionSheetController","file","rentservice","localstorage","croppedImagepath","isLoading","imagePickerOptions","maximumImagesCount","quality","objRent","photo","rentForm","rentTitle","rentDescription","rentValue","getData","company","idUserCompany","get","value","re","rentMedia","replace","addRent","userToken","getValue","oRent","token","subscribe","ret","console","log","fileUrl","then","newPath","showCroppedImage","split","error","alert","ImagePath","copyPath","splitPath","imageName","length","filePath","readAsDataURL","base64","create","header","buttons","text","handler","pickImage","PictureSourceType","PHOTOLIBRARY","CAMERA","role","actionSheet","present","sourceType","options","destinationType","DestinationType","FILE_URI","encodingType","EncodingType","JPEG","mediaType","MediaType","PICTURE","getPicture","imageData","cropImage","err","modal","selector","template","RentService","httpOpions","headers","rent","JSON","stringify","post","apiRent","pipe","handleError","errorMessage","ErrorEvent","message","status","providedIn"],"mappings":"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","file":"rent-rent-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons size=\\\"large\\\" slot=\\\"start\\\" (click)=\\\"backToCallingPage()\\\">\\n      <ion-icon name=\\\"arrow-back\\\"></ion-icon> \\n    </ion-buttons>\\n    <ion-title >\\n      Rent Register\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n \\n <ion-content>\\n   <ion-item-divider>\\n     <!--<div class=\\\"divImg\\\">-->\\n       <img (click)=\\\"selectImage()\\\" src=\\\"{{ photo }}\\\" alt=\\\"OMImports\\\"/>\\n     <!--</div>-->\\n     <!--<ion-button (click)=\\\"callExternalJS()\\\">Photo</ion-button>-->\\n   </ion-item-divider>\\n   <form [formGroup]=\\\"rentForm\\\" (ngSubmit)=\\\"submitForm()\\\" novalidate>  \\n     <ion-item>\\n       <ion-label position=\\\"stacked\\\">Rent Title <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\n       <ion-input required type=\\\"text\\\" formControlName=\\\"rentTitle\\\"></ion-input>\\n     </ion-item>\\n     <ion-item>\\n      <ion-label position=\\\"stacked\\\">Rent Description <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\n      <ion-input required type=\\\"text\\\" formControlName=\\\"rentDescription\\\"></ion-input>\\n    </ion-item> \\n    <ion-item>\\n      <ion-label position=\\\"stacked\\\">Rent Value <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\n      <ion-input required type=\\\"number\\\" formControlName=\\\"rentValue\\\"></ion-input>\\n    </ion-item> \\n     <div>\\n       <ion-button type=\\\"submit\\\">Confirm</ion-button>\\n       <ion-button color=\\\"danger\\\">Cancel</ion-button>\\n     </div>\\n   </form>\\n </ion-content>\\n \";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RentPage } from './rent.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RentPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RentPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RentPageRoutingModule } from './rent-routing.module';\n\nimport { RentPage } from './rent.page';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { ImageCropperModule } from 'ngx-image-cropper';\nimport { PictureModalComponent } from '../picture-modal/picture-modal.component';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    ImageCropperModule,\n    RentPageRoutingModule,\n  ],\n  declarations: [RentPage, PictureModalComponent],\n  entryComponents: [PictureModalComponent]\n})\nexport class RentPageModule {}\n","export default \"img {\\n  display: block;\\n  margin-left: auto;\\n  margin-right: auto;\\n  width: 150px;\\n  border-radius: 50%;\\n}\\n\\nion-select {\\n  font-size: 12px;\\n  font-weight: 500;\\n}\\n\\nion-label {\\n  font-size: 12px;\\n  font-weight: 500;\\n}\\n\\nion-avatar {\\n  max-width: 25px;\\n  max-height: 25px;\\n  margin-top: 10px;\\n  margin-left: 10px;\\n  margin-bottom: 10px;\\n}\\n\\nh5 {\\n  margin-top: 0;\\n  font-size: 15px;\\n  font-weight: bold;\\n}\\n\\n.subtitle {\\n  font-size: 12px;\\n}\\n\\n.ionIcon {\\n  font-size: 20px;\\n}\\n\\n.header-class {\\n  padding-top: 4px;\\n}\\n\\nion-slides {\\n  height: 100%;\\n}\\n\\nion-slide {\\n  display: block;\\n}\\n\\nion-label, .select-text {\\n  margin-left: 10px;\\n}\\n\\n.invalid {\\n  border: 1px solid #ea6153;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcmVudC9yZW50LnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGNBQUE7RUFDQSxpQkFBQTtFQUNBLGtCQUFBO0VBQ0EsWUFBQTtFQUNBLGtCQUFBO0FBQ0o7O0FBRUU7RUFDRSxlQUFBO0VBQ0EsZ0JBQUE7QUFDSjs7QUFFRTtFQUNFLGVBQUE7RUFDQSxnQkFBQTtBQUNKOztBQUVFO0VBQ0UsZUFBQTtFQUNBLGdCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxpQkFBQTtFQUNBLG1CQUFBO0FBQ0o7O0FBQ0U7RUFDRSxhQUFBO0VBQ0EsZUFBQTtFQUNBLGlCQUFBO0FBRUo7O0FBQUE7RUFDSSxlQUFBO0FBR0o7O0FBREE7RUFDSSxlQUFBO0FBSUo7O0FBREE7RUFDSSxnQkFBQTtBQUlKOztBQURBO0VBQ0EsWUFBQTtBQUlBOztBQURBO0VBQ0UsY0FBQTtBQUlGOztBQURBO0VBQ0UsaUJBQUE7QUFJRjs7QUFEQTtFQUNFLHlCQUFBO0FBSUYiLCJmaWxlIjoic3JjL2FwcC9yZW50L3JlbnQucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiaW1ne1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgIG1hcmdpbi1yaWdodDogYXV0bztcbiAgICB3aWR0aDogMTUwcHg7XG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICB9XG4gIFxuICBpb24tc2VsZWN0e1xuICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICBmb250LXdlaWdodDogNTAwO1xuICB9XG4gIFxuICBpb24tbGFiZWx7XG4gICAgZm9udC1zaXplOiAxMnB4O1xuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gIH1cblxuICBpb24tYXZhdGFyIHtcbiAgICBtYXgtd2lkdGg6IDI1cHg7XG4gICAgbWF4LWhlaWdodDogMjVweDtcbiAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gIH1cbiAgaDV7XG4gICAgbWFyZ2luLXRvcDowO1xuICAgIGZvbnQtc2l6ZTogMTVweDtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbn1cbi5zdWJ0aXRsZXtcbiAgICBmb250LXNpemU6IDEycHg7XG59XG4uaW9uSWNvbntcbiAgICBmb250LXNpemU6IDIwcHg7XG59XG5cbi5oZWFkZXItY2xhc3N7XG4gICAgcGFkZGluZy10b3A6IDRweDtcbn1cblxuaW9uLXNsaWRlcyB7XG5oZWlnaHQ6IDEwMCU7XG59XG5cbmlvbi1zbGlkZSB7XG4gIGRpc3BsYXk6IGJsb2NrO1xufVxuXG5pb24tbGFiZWwsIC5zZWxlY3QtdGV4dCB7XG4gIG1hcmdpbi1sZWZ0OiAxMHB4O1xufVxuXG4uaW52YWxpZCB7XG4gIGJvcmRlcjogMXB4IHNvbGlkICNlYTYxNTM7XG59XG5cbiAgXG4gICJdfQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { sha256 } from 'js-sha256';\nimport { ActionSheetController, AlertController, ModalController, NavController } from '@ionic/angular';\nimport { LoadingController } from '@ionic/angular';\nimport { Router } from '@angular/router';\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\nimport { HttpClient, HttpErrorResponse, HttpHeaders } from '@angular/common/http';\nimport { PopoverController } from '@ionic/angular';\nimport { PopovercomponentPage } from '../popovercomponent/popovercomponent.page'; \nimport { PictureModalComponent } from '../picture-modal/picture-modal.component';\nimport { Crop } from '@ionic-native/crop/ngx';\nimport { File } from '@ionic-native/file/ngx';\nimport { FormGroup, FormBuilder, Validators, FormControl } from '@angular/forms';\nimport { Rent } from '../models/rent';\nimport { RentService } from '../services/rent.service';\nimport { LocalstorageService } from '../services/localstorage.service';\n\n@Component({\n  selector: 'app-rent',\n  templateUrl: './rent.page.html',\n  styleUrls: ['./rent.page.scss'],\n})\nexport class RentPage implements OnInit {\n\n  rentForm: FormGroup;\n\n  croppedImagepath = \"\";\n  isLoading = false;\n\n  imagePickerOptions = {\n    maximumImagesCount: 1,\n    quality: 50\n  };\n\n  objRent = {} as Rent;\n\n  photo : string = '';\n\n  idUserCompany:any;\n  userToken:any;\n\n  constructor(public formBuilder: FormBuilder, public atrCtrl: AlertController, public loadingController: LoadingController,\n    private router:Router, private camera: Camera, private httpClient: HttpClient,\n    private popover:PopoverController, private modalCtrl: ModalController, private crop: Crop, \n    public actionSheetController: ActionSheetController, private file: File, \n    private rentservice: RentService, private localstorage: LocalstorageService) { }\n\n  ngOnInit() {\n    this.rentForm = new FormGroup({\n      rentTitle : new FormControl(),//'', Validators.compose([Validators.required, CompanyValidator.isValid])),\n      rentDescription : new FormControl(),\n      rentValue : new FormControl()\n    });\n    this.getData();\n  }\n\n\n  submitForm(){\n    this.objRent.company = this.idUserCompany;\n    this.objRent.rentTitle = this.rentForm.get('rentTitle').value;\n    this.objRent.rentDescription = this.rentForm.get('rentDescription').value;\n    this.objRent.rentValue = this.rentForm.get('rentValue').value;\n    var re = \"data:image/jpeg;base64,\";\n    this.objRent.rentMedia = this.photo.replace(re,\"\");\n    //console.log(this.company);\n    this.addRent(this.objRent, this.userToken);\n  }\n\n  async getData(){\n    this.idUserCompany = await this.localstorage.getValue('compId'); \n    this.userToken     = await this.localstorage.getValue('token');\n  }\n\n  async addRent(oRent:Rent, token:string){\n    await this.rentservice.addRent(oRent, token).subscribe((ret)=>{\n      console.log(ret);\n    });\n  }\n\n  cropImage(fileUrl) {\n    this.crop.crop(fileUrl, { quality: 50 })\n      .then(\n        newPath => {\n          this.showCroppedImage(newPath.split('?')[0])\n        },\n        error => {\n          alert('Error cropping image' + error);\n        }\n      );\n  }\n\n  showCroppedImage(ImagePath) {\n    this.isLoading = true;\n    var copyPath = ImagePath;\n    var splitPath = copyPath.split('/');\n    var imageName = splitPath[splitPath.length - 1];\n    var filePath = ImagePath.split(imageName)[0];\n\n    this.file.readAsDataURL(filePath, imageName).then(base64 => {\n      this.croppedImagepath = base64;\n      this.photo = this.croppedImagepath;\n      this.isLoading = false;\n    }, error => {\n      alert('Error in showing image' + error);\n      this.isLoading = false;\n    });\n  }\n\n  async selectImage() {\n    const actionSheet = await this.actionSheetController.create({\n      header: \"Select Image source\",\n      buttons: [{\n        text: 'Load from Library',\n        handler: () => {\n          this.pickImage(this.camera.PictureSourceType.PHOTOLIBRARY);\n        }\n      },\n      {\n        text: 'Use Camera',\n        handler: () => {\n          this.pickImage(this.camera.PictureSourceType.CAMERA);\n        }\n      },\n      {\n        text: 'Cancel',\n        role: 'cancel'\n      }\n      ]\n    });\n    await actionSheet.present();\n  }\n\n  pickImage(sourceType) {\n    const options: CameraOptions = {\n      quality: 100,\n      sourceType: sourceType,\n      destinationType: this.camera.DestinationType.FILE_URI,\n      encodingType: this.camera.EncodingType.JPEG,\n      mediaType: this.camera.MediaType.PICTURE\n    }\n    this.camera.getPicture(options).then((imageData) => {\n      this.cropImage(imageData)\n    }, (err) => {\n      // Handle error\n    });\n  }\n\n  async openModal(){\n    const modal = await this.modalCtrl.create({\n      component: PictureModalComponent\n    });\n\n    await modal.present();\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpErrorResponse, HttpHeaders } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { retry, catchError } from 'rxjs/operators';\nimport { Rent } from '../models/rent';\nimport { environment } from 'src/environments/environment';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RentService {\n\n  httpOpions = {\n    headers: new HttpHeaders({'Authorization':'Bearer '+environment.token})\n  }\n\n  constructor(private httpClient: HttpClient) { }\n\n  addRent(rent: Rent, token:string): Observable<Rent>{\n    this.httpOpions = {\n      headers: new HttpHeaders({'Authorization':'Bearer '+token})\n    }\n      //this.showConfirm('invocando a api');\n      console.log('Passou esse objeto '+JSON.stringify(rent))\n      console.log(this.httpOpions)\n       return this.httpClient.post<Rent>(environment.apiRent,rent,this.httpOpions)\n       .pipe(\n         retry(2),\n         catchError(this.handleError)\n       )\n     }\n \n   // Manipulação de erros\n   handleError(error: HttpErrorResponse) {\n     let errorMessage = '';\n     if (error.error instanceof ErrorEvent) {\n       // Erro ocorreu no lado do client\n       errorMessage = error.error.message;\n     } else {\n       // Erro ocorreu no lado do servidor\n       errorMessage = `Código do erro: ${error.status}, ` + `menssagem: ${error.message}`;\n     }\n     //this.showConfirm(errorMessage);\n     return throwError(errorMessage);\n   }\n }\n"]}